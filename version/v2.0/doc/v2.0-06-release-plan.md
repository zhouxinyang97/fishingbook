# Fishing Book v2.0 PRD - Release Plan（里程碑与排期）

## 1. 版本范围回顾
- v2.0 目标：书库选择打开 + 书本导入/管理 + 按书保存/恢复上次阅读位置（本地）。
- 不包含：云同步、在线书源、深度书签/批注、多端账号体系。

## 2. 里程碑（4–6 周交付，建议 5 周含缓冲）

### Milestone 0（第 0 周）：需求冻结与技术评审（0.5–1 天）
- 输出：本 PRD 评审结论、范围锁定、数据模型最终确认（Q1–Q3 结论）。
- 风险缓冲：若导入模式（引用/复制）争议大，先锁定“引用”。

### Milestone 1（第 1–2 周）：数据层与 IPC（基础可用）
- 交付：
  - `libraries.v2.0.json` 读写 + activeLibraryId
  - `books.<libraryId>.v2.0.json`、`progress.<libraryId>.v2.0.json` 读写（原子写）
  - IPC：library/book/progress 的最小闭环（list/open/import/save）
  - 迁移逻辑：从 `session.json` 迁移到 progress（仅在已导入书本时）
- 验收：用最简 UI/调试按钮即可完成“导入→打开→滚动→关闭→再次打开恢复”。

### Milestone 2（第 3–4 周）：UI 页面与核心流程打通（面向用户）
- 交付：
  - 书库选择页、书架页、阅读器返回书架入口
  - 书本管理：搜索、移除、重命名显示名
  - 继续阅读（Should，若进度允许）
  - 文件丢失提示与基础修复（Should，若进度允许）
- 验收：无开发者工具介入，普通用户可完成核心闭环。

### Milestone 3（第 5 周）：稳定性、边界与打包（含缓冲）
- 交付：
  - 大文件/高频滚动下的保存性能优化（节流、合并写入）
  - 异常容错：JSON 损坏恢复策略（备份/回退）、路径无权限、取消对话框
  - Windows 路径与中文文件名回归测试
- 验收：核心流程无明显卡顿；进度保存稳定；异常提示可理解。

## 3. 团队角色与分工（最小配置）
- 产品/规划：验收标准、边界用例、埋点字典（本 PRD 已覆盖）。
- 前端（renderer）：书库选择/书架/阅读器 UI 与状态管理、键盘可达性。
- 主进程（main）：文件对话框、文件读取解码、数据持久化与原子写、IPC。
- QA（可兼职）：回归（打开/导入/续读）、异常（缺失/权限/大文件）用例。

## 4. 依赖与风险
- 依赖：Electron 文件夹选择对话框（需要 `dialog.showOpenDialog` 支持 `openDirectory`）。
- 风险 1：`scrollRatio` 恢复在内容变化后偏移 → 接受为 v2.0 已知限制；后续可引入 anchor。
- 风险 2：频繁写入导致卡顿/磨损 → 必须节流并采用原子写；必要时内存缓存 + 定时 flush。
- 风险 3：文件路径变化导致书架失效 → 必须提供“重新定位”与明确提示。

## 5. Done 定义（v2.0）
- 必须：书库选择/打开、导入/管理书本、按书保存与恢复进度、迁移策略落地、关键边界覆盖（缺失/权限/取消）。
- 可选：继续阅读、重新定位文件（作为 Should，若影响交付则推迟但需在范围说明里明确）。
