# Fishing Book v2.0 PRD - 书库功能（纲要）

## 0. 一句话需求确认
- 为 Fishing Book v2.0 增加“书库”能力：支持添加/管理书本、书库选择并打开、每本书单独保存上次阅读位置（本地持久化）。

## 1. 背景与问题
- 当前版本以“打开单文件阅读”为主，并仅保存全局上次打开文件与滚动比例（`session.json`），不支持多书管理与按书保存进度。
- 用户在“多本书并行阅读/追更”时，存在：找书成本高、重复打开成本高、进度被覆盖/丢失的问题。

## 2. 目标（Goals）
- G1：用户能在应用内形成“书库 → 选书 → 阅读 → 自动续读”的闭环。
- G2：阅读进度按“书本”维度持久化，切换不同书本互不影响。
- G3：书库可选择打开（支持最近使用/多个书库），降低找书与切换成本。

## 3. 非目标（Non-Goals）——v2.0 不做
- 不新增线上书源、账号体系、云同步。
- 不新增 EPUB/目录/章节解析要求（TXT/LOG/MD 仍按现有文本渲染能力为基础；是否扩展见开放问题）。
- 不新增“书签体系（多书签/批注/高亮）”等深度阅读功能（仅“上次阅读位置”）。

## 4. 成功指标（Success Metrics）
- SM1：首次安装后 5 分钟内完成“创建/打开书库 + 导入 1 本书 + 开始阅读”的比例 ≥ 60%。
- SM2：在已导入 ≥2 本书的用户中，7 日内“从书库进入阅读器”的重复使用率 ≥ 40%。
- SM3：恢复进度准确率：恢复到上次位置 ±3% 滚动比例的成功率 ≥ 99%（异常文件/内容变化除外）。

## 5. 关键假设与开放问题（需尽快确认）
- A1：书库的最小实现为“一个本地目录路径 + 其中维护的书本列表（可引用外部路径）”。
- Q1：导入书本是“引用原文件路径”还是“复制到书库目录”？v2.0 建议先做“引用”，复制作为后续增强。
- Q2：书本唯一标识如何生成：基于 `filePath`、还是 `filePath+mtime+size`、还是内容 hash（性能开销）？
- Q3：是否需要“同一文件在多个书库中重复导入”的支持与处理策略？

## 6. 用户与场景（摘要）
- 多书并行：午休读 A，通勤读 B；需要一键切换且各自续读。
- 长文本追更：文件更新后仍希望“尽量接近原位置”续读。
- 多书库：工作电脑与个人资料分开，或按题材分库。

## 7. 信息架构（IA）
- L1：书库选择（Library Picker）
- L2：书架/管理（Bookshelf / Library Home）
- L3：阅读器（Reader）

## 8. 范围概览（MVP → v2.0）
- MVP（v2.0 核心）：书库选择/最近书库、导入书本（单/多选）、书本列表管理（删除/重命名显示名/搜索）、按书保存并恢复进度、最近阅读。
- v2.0 完整：书库切换入口、书本元数据补全（文件大小/更新时间）、丢失文件修复指引、基础冲突与迁移（从 `session.json` 迁移）。

## 9. 交付物（本 PRD 文档集）
- [v2.0-01-personas.md](file:///d:/code/fishing_book/doc/v2.0-01-personas.md)
- [v2.0-02-user-stories.md](file:///d:/code/fishing_book/doc/v2.0-02-user-stories.md)
- [v2.0-03-wireframes.md](file:///d:/code/fishing_book/doc/v2.0-03-wireframes.md)
- [v2.0-04-feature-spec.md](file:///d:/code/fishing_book/doc/v2.0-04-feature-spec.md)
- [v2.0-05-api-events.md](file:///d:/code/fishing_book/doc/v2.0-05-api-events.md)
- [v2.0-06-release-plan.md](file:///d:/code/fishing_book/doc/v2.0-06-release-plan.md)
